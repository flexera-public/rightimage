default         0
timeout         <%= node[:rightimage][:cloud] == "azure" || node[:rightimage][:cloud] == "ec2" ? "0":"5" %>
hiddenmenu

<% kern = ::File.basename(Dir.glob("#{guest_root}/boot/vmlinuz*").sort_by { |f| File.mtime(f) }.last) %>
<% initrd = ::File.basename(Dir.glob("#{guest_root}/boot/initr*").sort_by { |f| File.mtime(f) }.last) %>
title           <%= node[:rightimage][:platform] %> <%= node[:rightimage][:platform_version] %> (<%= kern %>) (<%= node[:rightimage][:hypervisor] %>) 
root            (hd0<%= ((partitioned? or hvm?)?",#{partition_number}":"") %>)
kernel          /boot/<%= kern %> root=<%= node[:rightimage][:root_mount][:dev] %> ro <%= ((node[:rightimage][:hypervisor] == "xen" && node[:rightimage][:virtualization] == "pvm")?"console=hvc0":"") %><%= hvm? ? "console=ttyS0":"" %> consoleblank=0 <%= node[:rightimage][:cloud] == "azure" ? "numa=off":"" %>
initrd          /boot/<%= initrd %>
